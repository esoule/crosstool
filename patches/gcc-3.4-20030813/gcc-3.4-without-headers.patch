See http://gcc.gnu.org/bugzilla/show_bug.cgi?id=8180
gcc-3.4 fails to recognize --without-headers properly.
Same problem was present in gcc-3.3 but wasn't as severe.

Symptom in gcc-3.4 tree was
/crosstool-0.18/result/powerpc-750-linux-gnu/gcc-3.4-20030813-glibc-2.3.2/powerpc-750-linux-gnu/include/stdio.h:138:28:bits/stdio_lim.h: No such file or directory
make[1]: *** [crtbegin.o] Error 1
make[1]: Leaving directory `/crosstool-0.18/build/powerpc-750-linux-gnu/gcc-3.4-20030813-glibc-2.3.2/build-gcc-core/gcc'


--- gcc-3.4-20030813/configure.in.old	Thu Aug 14 09:10:53 2003
+++ gcc-3.4-20030813/configure.in	Thu Aug 14 09:13:36 2003
@@ -242,7 +242,7 @@
 
 # If both --with-headers and --with-libs are specified, default to
 # --without-newlib.
-if test x"${with_headers}" != x && test x"${with_libs}" != x ; then
+if test x"${with_headers}" != x && test x"${with_headers}" != xno && test x"${with_libs}" != x ; then
   if test x"${with_newlib}" = x ; then
     with_newlib=no
   fi
@@ -922,12 +922,12 @@
 
 # Handle --with-headers=XXX.  If the value is not "yes", the contents of
 # the named directory are copied to $(tooldir)/sys-include.
-if test x"${with_headers}" != x ; then
+if test x"${with_headers}" != x && test x"${with_headers}" != xno ; then
   if test x${is_cross_compiler} = xno ; then
     echo 1>&2 '***' --with-headers is only supported when cross compiling
     exit 1
   fi
-  if test x"${with_headers}" != xyes ; then
+  if test x"${with_headers}" != xyes && test x"${with_headers}" != xno ; then
     case "${exec_prefixoption}" in
     "") x=${prefix} ;;
     *) x=${exec_prefix} ;;
--- gcc-3.4-20030813/gcc/configure.in.old	Thu Aug 14 09:05:09 2003
+++ gcc-3.4-20030813/gcc/configure.in	Thu Aug 14 09:10:39 2003
@@ -1395,7 +1395,7 @@
 inhibit_libc=
 if { { test x$host != x$target && test "x$with_sysroot" = x ; } ||
        test x$with_newlib = xyes ; } &&
-     test "x$with_headers" = x ; then
+     { test "x$with_headers" = x || test "x$with_headers" = xno ; } ; then
        inhibit_libc=-Dinhibit_libc
 fi
 AC_SUBST(inhibit_libc)

======== And, for those people building the snapshot who don't want to run autoconf: =========

--- gcc-3.4-20030813/configure.old	Thu Aug 14 09:14:06 2003
+++ gcc-3.4-20030813/configure	Thu Aug 14 09:15:00 2003
@@ -991,7 +991,7 @@
 
 # If both --with-headers and --with-libs are specified, default to
 # --without-newlib.
-if test x"${with_headers}" != x && test x"${with_libs}" != x ; then
+if test x"${with_headers}" != x && test x"${with_headers}" != xno && test x"${with_libs}" != x ; then
   if test x"${with_newlib}" = x ; then
     with_newlib=no
   fi
@@ -1671,12 +1671,12 @@
 
 # Handle --with-headers=XXX.  If the value is not "yes", the contents of
 # the named directory are copied to $(tooldir)/sys-include.
-if test x"${with_headers}" != x ; then
+if test x"${with_headers}" != x && test x"${with_headers}" != xno ; then
   if test x${is_cross_compiler} = xno ; then
     echo 1>&2 '***' --with-headers is only supported when cross compiling
     exit 1
   fi
-  if test x"${with_headers}" != xyes ; then
+  if test x"${with_headers}" != xyes && test x"${with_headers}" != xno ; then
     case "${exec_prefixoption}" in
     "") x=${prefix} ;;
     *) x=${exec_prefix} ;;
--- gcc-3.4-20030813/gcc/configure.old	Thu Aug 14 09:15:10 2003
+++ gcc-3.4-20030813/gcc/configure	Thu Aug 14 09:16:20 2003
@@ -5690,7 +5690,7 @@
 inhibit_libc=
 if { { test x$host != x$target && test "x$with_sysroot" = x ; } ||
        test x$with_newlib = xyes ; } &&
-     test "x$with_headers" = x ; then
+     { test "x$with_headers" = x || test "x$with_headers" = xno ; } ; then
        inhibit_libc=-Dinhibit_libc
 fi
 
